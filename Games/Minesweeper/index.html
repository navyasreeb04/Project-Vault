<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CSS-Only Minesweeper</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>üí£ CSS-Only Minesweeper</h1>
  </header>
  <div class="grid" id="minesweeper-grid">
    <!-- Grid will be generated by JS -->
  </div>
  <button onclick="location.reload()">Restart</button>
  <input type="checkbox" id="gameover-toggle" />
  <div class="gameover">
    <div>üí• Game Over!</div>
    <button onclick="location.reload()">Restart</button>
  </div>
  <footer>
    <div class="credits">Made with ‚ù§Ô∏è using HTML, CSS, and minimal JS</div>
  </footer>
  <script>
    const SIZE = 8;
    const MINES = 10;
    const grid = [];
    const minePositions = new Set();
    while (minePositions.size < MINES) {
      minePositions.add(Math.floor(Math.random() * SIZE * SIZE));
    }
    for (let i = 0; i < SIZE * SIZE; i++) {
      grid[i] = minePositions.has(i) ? 'mine' : 'empty';
    }
    // Calculate numbers
    function getNeighbors(idx) {
      const x = idx % SIZE, y = Math.floor(idx / SIZE);
      const neighbors = [];
      for (let dy = -1; dy <= 1; dy++) {
        for (let dx = -1; dx <= 1; dx++) {
          if (dx === 0 && dy === 0) continue;
          const nx = x + dx, ny = y + dy;
          if (nx >= 0 && nx < SIZE && ny >= 0 && ny < SIZE) {
            neighbors.push(ny * SIZE + nx);
          }
        }
      }
      return neighbors;
    }
    for (let i = 0; i < SIZE * SIZE; i++) {
      if (grid[i] === 'mine') continue;
      const neighbors = getNeighbors(i);
      const count = neighbors.filter(n => grid[n] === 'mine').length;
      if (count > 0) {
        grid[i] = { type: 'number', count };
      }
    }
    // Render grid
    const gridDiv = document.getElementById('minesweeper-grid');
    gridDiv.innerHTML = '';
    for (let i = 0; i < SIZE * SIZE; i++) {
      let label = document.createElement('label');
      label.className = 'cell';
      let input = document.createElement('input');
      input.type = 'checkbox';
      input.tabIndex = 0;
      input.checked = false; // Ensure not checked by default
      let span = document.createElement('span');
      if (grid[i] === 'mine') {
        label.setAttribute('data-type', 'mine');
        span.textContent = 'üí£';
        // Add event to trigger game over
        input.addEventListener('change', function() {
          if (input.checked) {
            document.getElementById('gameover-toggle').checked = true;
          }
        });
      } else if (typeof grid[i] === 'object' && grid[i].type === 'number') {
        label.setAttribute('data-type', 'number');
        label.setAttribute('data-count', grid[i].count);
        span.textContent = grid[i].count;
      } else {
        label.setAttribute('data-type', 'empty');
        span.textContent = '';
      }
      label.appendChild(input);
      label.appendChild(span);
      gridDiv.appendChild(label);
    }
    // Ensure gameover overlay is hidden on restart
    document.getElementById('gameover-toggle').checked = false;
  </script>
</body>
</html>